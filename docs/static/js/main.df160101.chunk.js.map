{"version":3,"sources":["LineGraph.js","BarGraph.js","App.js","index.js"],"names":["LineGraph","props","width","height","data","dataKey","xField","type","domain","fields","lines","map","x","field","Math","max","f","d","l","key","stroke","color","strokeWidth","BarGraph","barSize","scale","padding","left","right","strokeDasharray","fill","background","useData","file","useState","_data","setData","length","Papa","parse","download","header","complete","res","substring","filter","App","regione","setRegione","dayspan","setDayspan","size","setSize","useLayoutEffect","updateSize","window","innerWidth","innerHeight","addEventListener","removeEventListener","useWindowSize","screenWidth","w","timeSpan","ndays","Date","setDate","getDate","toISOString","split","maxDate","sort","reverse","lastVal","totale_positivi","totale_casi","useSoluzione","toFixed","min","value","onChange","useLastData","r","name","denominazione_regione","parseInt","nuovi_positivi","A","B","options","unique","label","s","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.df160101.chunk.js","sourcesContent":["import React from 'react'\nimport { LineChart, XAxis, YAxis, Legend, Tooltip, CartesianGrid, Line } from 'recharts'\n\nconst LineGraph = (props) => {\n  const max = () => {\n    const data = props.data\n    const fields = props.lines.map(x => x.field)\n\n    return Math.max(...fields.map(f => Math.max(...data.map(d => d[f]))))\n  }\n\n  return (\n  <LineChart\n    width={props.width}\n    height={props.height}\n    data={props.data}\n  >\n    <XAxis dataKey={props.xField}/>\n    <YAxis type='number' domain={[0, max()]}/>\n\n    <CartesianGrid />\n\n    <Legend />\n    <Tooltip />\n\n    {\n      props.lines\n      .map(l => <Line key={l.field} type={l.type} dataKey={l.field} stroke={l.color} strokeWidth={l.strokeWidth} />)\n    }\n  </LineChart>\n  )\n}\n\nexport default LineGraph\n","import React, { PureComponent } from 'react'\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, } from 'recharts'\n\nconst BarGraph = props =>\n  <BarChart\n    width={props.width}\n    height={props.height}\n    data={props.data}\n    barSize={20}\n  >\n    <XAxis dataKey=\"name\" scale=\"point\" padding={{ left: 10, right: 10 }} />\n    <YAxis />\n    <Tooltip />\n    <CartesianGrid strokeDasharray=\"3 3\" />\n    <Bar dataKey=\"value\" barSize={5} fill=\"#82ca9d\" background={{ fill: '#eee' }} />\n  </BarChart>\n\nexport default BarGraph\n","import React, { useState, useLayoutEffect } from 'react'\nimport unique from 'array-unique'\n\nimport LineGraph from './LineGraph'\nimport BarGraph from './BarGraph'\n\nimport Papa from 'papaparse'\nimport Slider from 'rc-slider'\nimport Select from 'react-select'\nimport 'rc-slider/assets/index.css'\n\nconst useWindowSize = () => {\n  const [size, setSize] = useState([0, 0])\n\n  useLayoutEffect(() => {\n    const updateSize = () => setSize([window.innerWidth, window.innerHeight])\n\n    window.addEventListener('resize', updateSize)\n    updateSize()\n\n    return () => window.removeEventListener('resize', updateSize)\n  }, [])\n\n  return size\n}\n\nconst useData = (file) => {\n  const [_data, setData] = useState([])\n\n  if(_data.length === 0)\n    Papa.parse(file, {\n      download: true,\n      header: true,\n      complete: (res => {\n          const data =\n            res.data\n            .map(x => {\n              x.data = x.data.substring(0, 10)\n\n              return x\n            })\n            .filter(x => x.data !== '')\n\n          setData(data)\n        }\n      )\n    })\n\n  return _data\n}\n\nconst App = () => {\n  const [regione, setRegione] = useState(\"Lazio\")\n  const [dayspan, setDayspan] = useState(30)\n  const [screenWidth, screenHeight] = useWindowSize()\n  const w = screenWidth - 30\n\n  const timeSpan = (ndays) => {\n    const d = new Date()\n    d.setDate(d.getDate() - ndays)\n    return d.toISOString().split('T')[0]\n  }\n\n  const useSoluzione = () => {\n    const data = useData('dati/nazione.csv')\n\n    const maxDate = data.map(x => x[\"data\"]).sort().reverse()[0]\n    const lastVal = data.filter(x => x.data === maxDate)[0]\n\n    return lastVal ? (1-lastVal.totale_positivi/lastVal.totale_casi)*100 : 0\n  }\n\n  const useLastData = (file) => {\n    const data = useData(file)\n\n    const maxDate = data.map(x => x[\"data\"]).sort().reverse()[0]\n    const lastVal = data.filter(x => x.data === maxDate)\n\n    return lastVal ? lastVal : []\n  }\n\n  return (\n    <>\n      <h1><b>Coronavisual</b></h1>\n      <hr/>\n\n      <h3>Soluzione: {useSoluzione().toFixed(2)}%</h3>\n      <hr/>\n\n      <div>\n        <Slider\n          min={1}\n          max={365}\n          value={dayspan}\n          onChange={setDayspan}\n        />\n        <h4>Dati: ultimi {dayspan} giorni</h4>\n      </div>\n\n      <h3>Italia: distribuzione nuovi casi ad oggi</h3>\n      <BarGraph\n        width={w}\n        height={w/2}\n        data={\n          useLastData('dati/regioni.csv')\n          .map(r => { return { name: r.denominazione_regione, value: parseInt(r.nuovi_positivi) }})\n          .sort((A, B) => B.value - A.value)\n        }\n      />\n\n\n      <h3>Italia: delta</h3>\n      <LineGraph\n        width={w}\n        height={w/2}\n        data={\n          useData('dati/nazione.csv')\n          .filter(x => x.data >= timeSpan(dayspan))\n        }\n        xField=\"data\"\n        lines={\n          [\n            {field: \"nuovi_risolti\",  color: \"#8884d8\", strokeWidth: 2, type: \"monotone\"},\n            {field: \"nuovi_positivi\", color: \"#82ca9d\", strokeWidth: 2, type: \"monotone\"},\n          ]\n        }\n      />\n\n      <h3>Italia: attivi</h3>\n      <LineGraph\n        width={w}\n        height={w/2}\n        data={\n          useData('dati/nazione.csv')\n          .filter(x => x.data >= timeSpan(dayspan))\n        }\n        xField=\"data\"\n        lines={\n          [\n            {field: \"totale_positivi\", color: \"#ff84d8\", strokeWidth: 2, type: \"monotone\"},\n          ]\n        }\n      />\n\n      <h3>Italia: regioni</h3>\n      <Select\n        options={\n          unique(\n            useData('dati/regioni.csv')\n            .map(x => x.denominazione_regione)\n          )\n          .map(x => { return { value: x, label: x }})\n        }\n        onChange={s => setRegione(s.value)}\n        value={{label: regione, value: regione}}\n      />\n      <LineGraph\n        width={w}\n        height={w/2}\n        data={\n          useData('dati/regioni.csv')\n          .filter(x => x.data >= timeSpan(dayspan))\n          .filter(x => x.denominazione_regione === regione)\n        }\n        xField=\"data\"\n        lines={\n          [\n            {field: \"nuovi_risolti\",  color: \"#8884d8\", strokeWidth: 2, type: \"monotone\"},\n            {field: \"nuovi_positivi\", color: \"#82ca9d\", strokeWidth: 2, type: \"monotone\"},\n          ]\n        }\n      />\n\n    </>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport 'react-skeleton-css/styles/skeleton.2.0.4.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}